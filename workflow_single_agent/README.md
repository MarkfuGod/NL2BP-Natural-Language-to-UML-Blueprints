# 单代理多角色协作开发工作流程

## 📋 概述

本目录包含了一个基于单代理多角色协作的软件开发工作流程系统。该系统通过角色切换的方式，让单个AI代理扮演不同的专业角色，完成从需求分析到代码部署的完整软件开发生命周期。

## 🏗️ 系统架构

### 核心理念
- **单代理多角色**: 一个AI代理通过角色切换扮演不同的专业角色
- **工作流驱动**: 按照预定义的工作流程顺序执行任务
- **文档驱动**: 每个角色的输出作为下一个角色的输入
- **PlantUML集成**: 专门优化用于生成和管理PlantUML图表

## 👥 角色体系

本系统包含以下7个核心角色：

| 角色 | 英文名称 | 模式标识 | 主要职责 |
|------|----------|----------|----------|
| 📝 需求分析师 | Requirements Analyst | `01-req-gen` | 将自然语言转换为结构化需求文档 |
| 🏗️ 架构设计师 | System Architect | `systemdesign` | 设计系统架构和技术方案 |
| 📊 蓝图设计师 | Blueprint Designer | `blueprintdesign` | 生成PlantUML图表和可视化设计 |
| 💻 编码工程师 | Coder | `coder` | 实现具体的代码功能 |
| 🔍 代码审查员 | Code Reviewer | `code-reviewer` | 审查代码质量和规范 |
| 🚀 部署调试员 | Deployer & Debugger | `debugger-deployer` | 部署、调试和测试 |
| 🛠️ 代码诊断师 | Code Critic | `code-critic` | 诊断问题并提供解决方案 |

## 📁 目录结构

```
workflow_single_agent/
├── README.md                          # 本文档
├── agent_profile/                     # 代理配置文件
│   ├── BlueprintWriter_Profile.md     # 蓝图设计师角色配置
│   └── BlueprintWirter_Profile.drawio.svg  # 角色关系图
├── role_prompts/                      # 角色提示规则
│   ├── rules-01-req-gen/             # 需求分析师规则
│   ├── rules-blueprintdesign/        # 蓝图设计师规则
│   ├── rules-code-reviewer/          # 代码审查员规则
│   ├── rules-coder/                  # 编码工程师规则
│   ├── rules-debugger-deployer/      # 部署调试员规则
│   └── rules-systemdesign/           # 架构设计师规则
└── workflow_pic/                     # 工作流程图和说明
    ├── single_agent_workflow.drawio.svg  # 工作流程图
    ├── workflow_EN.md                # 英文工作流程说明
    └── workflow_ZH.md                # 中文工作流程说明
```

## 🔄 工作流程

### 标准开发流程

1. **需求收集** → 📝 需求分析师
   - 接收用户自然语言需求
   - 生成结构化需求文档
   - 输出：Markdown格式需求文档

2. **架构设计** → 🏗️架构设计师
   - 基于需求文档设计系统架构
   - 制定技术方案和实现策略
   - 输出：架构设计文档

3. **蓝图设计** → 📊 蓝图设计师
   - 将需求和架构转换为可视化图表
   - 生成PlantUML图表（用例图、类图、序列图等）
   - 输出：PlantUML文件和图表说明

4. **代码实现** → 💻 编码工程师
   - 根据架构设计实现代码
   - 生成前端界面和后端逻辑
   - 输出：完整的代码实现

5. **代码审查** → 🔍 代码审查员
   - 审查代码质量和规范
   - 提供改进建议
   - 输出：代码审查报告

6. **部署测试** → 🚀 部署调试员
   - 执行项目部署
   - 进行调试和测试
   - 输出：部署报告和测试结果

### 异常处理流程

- **问题诊断** → 🛠️ 代码诊断师
  - 与用户交互解决技术问题
  - 提供问题解决方案
  - 协调其他角色修复问题

## 🎯 核心特性

### 📊 PlantUML图表生成
支持多种图表类型：
- **用例图**: 展示用户与系统的交互
- **类图**: 显示系统核心实体及关系
- **活动图**: 描述业务流程
- **序列图**: 展示消息交互过程
- **部署图**: 显示系统部署架构
- **文件结构图**: 展示项目文件组织

### 🔧 智能角色切换
- 自动根据工作流程切换角色
- 每个角色专注于特定领域的任务
- 角色间通过文档进行信息传递

### 📝 文档驱动开发
- 结构化的需求文档
- 详细的架构设计文档
- 完整的代码审查报告
- 全面的部署测试报告

## 🚀 使用指南

### 启动工作流程

1. **初始化需求分析**
   ```
   切换到 01-req-gen 模式
   提供自然语言需求描述
   ```

2. **自动流程执行**
   - 系统会自动按照工作流程顺序执行
   - 每个角色完成任务后自动切换到下一个角色
   - 用户可以在任何阶段提供反馈和修改要求

3. **问题处理**
   ```
   遇到问题时切换到 code-critic 模式
   描述具体问题获取解决方案
   ```

### 配置文件说明

#### 角色配置文件 (`agent_profile/`)
- 定义每个角色的核心身份和能力
- 指定可用工具和操作规则
- 设置输入输出格式要求

#### 角色提示规则 (`role_prompts/`)
- 详细的角色行为指导
- 具体的任务执行规则
- 与其他角色的协作方式

## 📋 最佳实践

### 需求描述
- 使用清晰、具体的自然语言
- 包含功能需求和非功能需求
- 明确用户角色和使用场景

### 图表设计
- 根据项目阶段选择合适的图表类型
- 保持命名一致性
- 添加必要的注释和说明

### 代码实现
- 遵循架构设计指导
- 注重代码质量和可维护性
- 及时响应审查反馈

## 🔗 相关资源

- [工作流程详细说明](workflow_pic/workflow_ZH.md)
- [蓝图设计师配置](agent_profile/BlueprintWriter_Profile.md)
- [PlantUML格式示例](role_prompts/rules-blueprintdesign/02-formatting-examples.md)
- [生成示例](../generation_examples_uml_zh/)

## 📞 支持与反馈

如果在使用过程中遇到问题或有改进建议，请：
1. 查阅相关角色的提示规则文档
2. 使用代码诊断师角色获取技术支持
3. 参考工作流程说明文档

---

*本工作流程系统专为高效的软件开发和PlantUML图表生成而设计，通过角色专业化和流程标准化，确保开发质量和效率。*