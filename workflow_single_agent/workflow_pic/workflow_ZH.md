# 多角色协作开发工作流程

## 📋 角色概览

本系统包含以下7个核心角色：

| 角色 | 英文名称 | 主要职责 |
|------|----------|----------|
| 👤 用户 | User | 提供需求，与系统交互 |
| 📝 需求分析师 | Requirements Analyst | 将自然语言转换为需求文档 |
| 🏗️ 架构设计师 | System Architect | 设计系统架构 |
| 📊 蓝图设计师 | Blueprint Designer | 生成PlantUML图表 |
| 💻 编码工程师 | Coder | 实现代码 |
| 🔍 代码审查员 | Code Reviewer | 审查代码质量 |
| 🚀 部署调试员 | Deployer & Debugger | 部署和调试 |
| 🛠️ 代码诊断师 | Code Critic | 诊断问题，提供解决方案 |

---

## 🔄 角色详细职责

### 👤 A. 用户 (User)

**描述**: 通过自然语言指令与系统进行交互，获取完整的软件开发服务

**主要功能**:
1. 📝 提供自然语言需求描述
2. 🛠️ 与代码诊断师交互解决问题
3. 📋 与需求分析师确认需求文档
4. 💻 与编码工程师沟通代码实现
5. 🏗️ 与架构设计师讨论系统设计
6. 📊 与蓝图设计师确认图表设计

---

### 📝 B. 需求分析师 (Requirements Analyst)

**描述**: 负责将用户的自然语言指令转换为结构化的需求文档

**主要功能**:
1. 🔄 将用户自然语言转换为需求要点
2. 📄 生成Markdown格式的需求文档
3. 📊 与蓝图设计师协作
4. 🏗️ 与架构设计师协作

**交互场景**:
- **与蓝图设计师**: 提供需求文档，支持修改请求
- **与架构设计师**: 交付需求文档

---

### 🏗️ C. 架构设计师 (System Architect)

**描述**: 将需求文档转换为可实现的系统架构设计

**主要功能**:
1. 🎯 根据需求文档生成系统架构
2. ✅ 评估设计的合理性和可行性
3. 📄 生成Markdown格式的设计文档
4. 📊 与蓝图设计师协作
5. 💻 与编码工程师协作

**交互场景**:
- **与蓝图设计师**: 提供架构设计文档
- **与编码工程师**: 提供架构设计和需求文档

---

### 📊 D. 蓝图设计师 (Blueprint Designer)

**描述**: 将需求文档和架构设计转换为可视化的PlantUML图表

**主要功能**:
1. 🔍 分析需求文档和设计文档要点
2. 📈 根据项目不同阶段生成对应的PlantUML图像
3. 👤 与用户交互确认图表

**支持的图表类型**:
- 📋 **用例图**: 展示用户与系统的交互
- 🏗️ **类图**: 显示系统核心实体及关系
- 🔄 **活动图**: 描述业务流程
- ⏱️ **时序图**: 展示消息交互过程
- 🚀 **部署图**: 显示系统部署架构

**示例场景**:

#### 场景1: 用户权限管理系统
```
输入需求：
1. 用户可以注册、登录、查看个人资料
2. 管理员可管理用户数据和审核内容
3. 用户与管理员有不同权限
4. 所有用户操作需记录日志

输出图表：
- 用例图：展示用户与管理员的操作权限边界
- 类图：User、Admin、Log等核心实体及其关系
- 活动图：描述用户注册和登录的流程
- 时序图：用户登录流程的消息交互过程
```

#### 场景2: 在线购物系统
```
项目名称：在线购物系统
项目阶段：需求分析
需求描述：用户可以浏览商品、添加商品到购物车、下订单并进行支付
输出：用例图及简要说明
```

#### 场景3: 图书管理系统
```
项目名称：图书管理系统
项目阶段：系统设计
系统架构：前后端分离
需求描述：支持图书的添加、删除、修改和查询功能，用户可以借阅和归还图书
输出：类图及简要说明
```

---

### 💻 E. 编码工程师 (Coder)

**描述**: 根据架构设计实现具体的代码功能

**主要功能**:
1. 🎨 生成前端界面（UI尺寸、组件大小、配色方案）
2. ⚙️ 实现后端代码逻辑
3. 📝 与需求分析师交互
4. 🏗️ 与架构设计师交互
5. 🔍 与代码审查员交互

**异常处理**:
- **需求问题**: 遇到不合理需求或无法实现时，返回修改要求
- **架构问题**: 遇到不合理架构、无法实现或无法部署时，返回修改要求
- **审查反馈**: 根据代码审查结果进行修改

---

### 🔍 F. 代码审查员 (Code Reviewer)

**描述**: 对编码实现进行质量审查，确保代码符合标准

**主要功能**:
1. ✅ 根据需求文档和架构设计审查代码
2. 📋 提供详细的代码审查意见
3. 💻 与编码工程师交互
4. 🚀 与部署调试员交互

**审查流程**:
- **发现问题**: 给出代码审查意见，要求修改
- **审查通过**: 确认代码质量，交付部署

---

### 🚀 G. 部署调试员 (Deployer & Debugger)

**描述**: 负责项目的部署、调试和测试工作

**主要功能**:
1. 🚀 执行项目部署
2. 🐛 进行调试和问题排查
3. 🧪 执行项目测试
4. 📊 生成详细的部署、调试、测试报告
5. 👤 与用户交互反馈结果

**结果处理**:
- **部署成功**: 交付用户，提供详细报告
- **部署失败**: 交付用户，标明实现想法、错误内容、错误位置、错误字段、错误类别

---

### 🛠️ H. 代码诊断师 (Code Critic)

**描述**: 与用户交互，提供问题诊断和解决方案

**主要功能**:
1. ❓ 回答用户技术问题
2. 💡 提供问题解决方案
3. ✅ 等待用户确认解决方案
4. 🔄 将确认的解决方案返回给部署调试员
5. 👤 与用户交互
6. 🚀 与部署调试员交互

---

## 🔗 详细交互流程

### 👤 用户交互场景

#### A.2 与代码诊断师交互
1. ❓ 询问错误内容的原因
2. 🔍 询问疑似错误是否为真正的错误
3. 💡 询问如何解决特定错误

#### A.3 与需求分析师交互
1. ✅ 确认需求文档是否合理、符合实际需求

#### A.4 与编码工程师交互
1. 🔧 直接要求修改代码错误

#### A.5 与架构设计师交互
1. ✅ 确认架构设计是否合理、符合实际需求

#### A.6 与蓝图设计师交互
1. ✅ 确认蓝图是否合理、符合实际需求

### 🔄 角色间协作流程

#### 📝 需求分析师 → 📊 蓝图设计师 (B.3)
- 输入需求文档，处理修改请求

#### 📝 需求分析师 → 🏗️ 架构设计师 (B.4)
- 提供需求文档

#### 🏗️架构设计师 → 📊 蓝图设计师 (C.4)
- 提供架构设计文档

#### 🏗️ 架构设计师 → 💻 编码工程师 (C.5)
- 提供架构设计和需求文档

#### 📊 蓝图设计师 → 👤 用户 (D.3)
- 提供蓝图供用户审查

#### 💻 编码工程师异常处理 (E.3, E.4)
- **E.3**: 遇到不合理需求或无法实现时，返回修改要求
- **E.4**: 遇到不合理架构、无法实现或无法部署时，返回修改要求

#### 💻 编码工程师 → 🔍 代码审查员 (E.5)
- 提交前后端代码供审查，根据审查结果修改

#### 🔍 代码审查员反馈 (F.3, F.4)
- **F.3**: 发现问题时，给出审查意见要求修改
- **F.4**: 审查通过时，确认交付部署

#### 🚀 部署调试员 → 👤 用户 (G.4)
- **部署成功**: 交付详细的部署、调试、测试报告
- **部署失败**: 提供错误分析报告

#### 🛠️ 代码诊断师交互 (H.4, H.5)
- **H.4**: 返回问题解答
- **H.5**: 发现部署问题时，返回解决方案

